<!DOCTYPE HTML>
<!--Copyright 2014 Eugenio Petullà-->
<!--This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <http://www.gnu.org/licenses/>.-->
<!--
    This app is based on WebRTC protocol and also on the amazing work of Ferran Caellas (FerCa) http://fercaiscoding.com
    He gave me the knowledge in order to do the chromatic part using the Fourier Transform.-->
<!--For more information and contact read the README.txt file or drop me a line on http://www.eugeniopetulla.com-->

<html lang="en">
<head>
<meta charset="utf-8" />
	<link href="style/headers.css" rel="stylesheet" type="text/css">
	<link href="style/drawer.css" rel="stylesheet" type="text/css">
	<link href="style/buttons.css" rel="stylesheet" type="text/css">
	<link href="style/fonts.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="style/stylesheet.css" type="text/css" charset="utf-8" />
  <script src="js/jquery-1.11.0.min.js"></script>
  <script src='js/frequenciesextractor.js'></script>
  <script src='js/notesfrequencies.js'></script>
  <script src='js/tuner.js'></script>
<title>Simple Banjo tuner</title>
</head>
<script>

    window.AudioContext = window.AudioContext;

    navigator.getMedia = ( navigator.getUserMedia ||
            navigator.mozGetUserMedia );

    var audioContext = new AudioContext();

    var gotStreamCallback = function gotStreamCallbackFunction(mediaStream) {
        var microphoneSource = audioContext.createMediaStreamSource(mediaStream);

        var tuner = new Tuner(microphoneSource, audioContext.destination, audioContext);

        tuner.start(function(note) {
            $('#note').text(note);
            if ( (note=="F#4") || (note=="D3") || (note=="F#3") || (note=="A3") || (note=="D4") ) {
            $("#note").toggleClass("green", true);
            }
            else {
            $("#note").toggleClass("green", false);
            }
        });

    };

    var errorCallback = function errorCallbackFunction(error) {
        console.log(error);
    };

    navigator.getMedia({audio: true}, gotStreamCallback, errorCallback);

</script>
<section data-type="sidebar">
  <nav>
    <h2>Five strings</h2>
    <ul>
      <li><a href="index.html">Open G</a></li>
      <li><a href="doublec.html">Double C</a></li>
      <li><a href="dropc.html">Drop C</a></li>
      <li><a href="#content">D Tuning</a></li>
      <li><a href="gmodal.html">G Modal</a></li>
      <li><a href="longneck.html">Longneck</a></li>
    </ul>
    <h2>Tenor</h2>
    <ul>
      <li><a href="standardtenor.html">Standard</a></li>
      <li><a href="irishtuning.html">Irsih Tuning</a></li>
      <li><a href="chicagotenor.html">Chicago Tuning</a></li>
    </ul>
    <h2>Plectrum</h2>
    <ul>
      <li><a href="standardplectrum.html">Standard</a></li>
      <li><a href="chicagoplectrum.html">Chicago Tuning</a></li>
    </ul>
    <h2>6/12 Strings</h2>
    <ul>
      <li><a href="standard6.html">Standard</a></li>
    </ul>
  </nav>
</section>
<section id="drawer" role="region">
  <header>
	<meta name="viewport" content="width=device-width" />
    <a href="#content"><span class="icon icon-menu">hide sidebar</span></a>
    <a href="#drawer"><span class="icon icon-menu">show sidebar</span></a>
    <h1>Five Strings</h1>
  </header>
  <header>
    <h2>D Tuning</h2>
  </header>
  <div role="main">
	<div class="hero">Play the string you want to tune and match green color or tap the button to reproduce the correct sound.</div>
  <p id="note" class="green"> </p>
	<div class="fretboard">
		<audio id="F#4">
  		<source src="sounds/F#4.ogg" type="audio/ogg" />
  		Your browser does not support the audio tag.
		</audio>
		<audio id="D3">
  		<source src="sounds/D3.ogg" type="audio/ogg" />
  		Your browser does not support the audio tag.
		</audio>
		<audio id="F#3">
  		<source src="sounds/F#3.ogg" type="audio/ogg" />
  		Your browser does not support the audio tag.
		</audio>
		<audio id="A3">
  		<source src="sounds/A3.ogg" type="audio/ogg" />
  		Your browser does not support the audio tag.
		</audio>
		<audio id="D4">
  		<source src="sounds/D4.ogg" type="audio/ogg" />
  		Your browser does not support the audio tag.
		</audio>
		<!-- Start Button Section -->
  		<button type="button" onclick="document.getElementById('F#4').play()">F#4 (FA#)</button>
		<button type="button" onclick="document.getElementById('D3').play()">D3 (RE)</button>
		<button type="button" onclick="document.getElementById('F#3').play()">F#3 (FA#)</button>
		<button type="button" onclick="document.getElementById('A3').play()">A3 (LA)</button>
		<button type="button" onclick="document.getElementById('D4').play()">D4 (RE)</button>
  	</div>
  </div>
</section>
</html>
